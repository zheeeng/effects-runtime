name: GE AI Bot

on:
  issues:
    types: [opened, labeled]
  issue_comment:
    types: [created]
  pull_request:
    types: [opened, synchronize, labeled]

jobs:
  bot:
    runs-on: ubuntu-latest
    steps:
      # 1. 首先检出当前仓库代码
      - name: Checkout Current Repo
        uses: actions/checkout@v4

      # 2. 然后检出 Action 源码到指定子目录
      - name: Checkout Action
        uses: actions/checkout@v4
        with:
          repository: zheeeng/GalaceanEffectsAIDeveloper # 您的 Action 仓库
          ref: release                                   # ⚠️ 必须指定 release 分支 (包含构建产物)
          token: ${{ secrets.PRIVATE_ACTION_TOKEN }}     # 必须是 PAT
          path: .github/actions/ge-bot

      # 3. 使用本地路径引用 Action
      - name: Run GE AI Bot
        uses: ./.github/actions/ge-bot
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
